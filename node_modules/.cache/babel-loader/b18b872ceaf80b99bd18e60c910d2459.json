{"ast":null,"code":"var _jsxFileName = \"/Users/Sigi/Desktop/Airbnb/front-end/my-project/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Switch, Route, Link, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport axiosWithAuth from './utils/axiosWithAuth';\nimport * as Yup from 'yup';\nimport formSchema from './validation/formSchema';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport CreateListing from './components/CreateListing';\nimport UserProfile from './components/UserProfile';\nimport ListingCard from './components/ListingCard';\nimport PrivateRoute from './components/PrivateRoute';\nconst initialLoginValues = {\n  username: '',\n  password: ''\n};\nconst initialSignupValues = {\n  firstName: '',\n  lastName: '',\n  username: '',\n  password: '',\n  email: ''\n};\nconst initialErrors = {\n  firstName: '',\n  lastName: '',\n  username: '',\n  email: '',\n  password: ''\n};\nconst initialListingValues = {\n  listingId: '',\n  listingname: '',\n  location: '',\n  maxnumguests: '',\n  minnumnights: '',\n  numbeds: '',\n  petsallowed: ''\n};\nconst initialDisabled = false;\nconst initialUsers = [];\nconst initialListings = [];\n\nfunction App() {\n  const [loginValues, setLoginValues] = useState(initialLoginValues);\n  const [signupValues, setSignupValues] = useState(initialSignupValues);\n  const history = useHistory();\n  const [formErrors, setFormErrors] = useState(initialErrors);\n  const [disabled, setDisabled] = useState(initialDisabled);\n  const [users, setUsers] = useState(initialUsers);\n  const [listingValues, setListingValues] = useState(initialListingValues);\n  const [listings, setListings] = useState(initialListings);\n\n  const getUsers = () => {\n    axiosWithAuth().get('https://seanmx96-airbnb-optimal-price.herokuapp.com/users/users').then(res => {\n      setUsers(res.data.data);\n    }).catch(err => {\n      debugger;\n    });\n  };\n\n  const onInputChange = evt => {\n    const {\n      name,\n      value\n    } = evt.target;\n    Yup.reach(formSchema, name).validate(value).then(() => {\n      setFormErrors({ ...formErrors,\n        [name]: ''\n      });\n    }).catch(err => {\n      setFormErrors({ ...formErrors,\n        [name]: err.errors[0]\n      });\n    });\n    setLoginValues({ ...loginValues,\n      [name]: value\n    });\n    setSignupValues({ ...signupValues,\n      [name]: value\n    });\n    setListingValues({ ...listingValues,\n      [name]: value\n    });\n    console.log(signupValues);\n  };\n\n  const postNewUser = newUser => {\n    axios.post('https://seanmx96-airbnb-optimal-price.herokuapp.com/createnewuser', newUser).then(res => {\n      setUsers([...users, res.data]);\n    }).catch(err => {\n      debugger;\n    });\n  };\n\n  const onSignup = evt => {\n    // evt.preventDefault()\n    const newUser = {\n      firstName: signupValues.firstName,\n      lastName: signupValues.lastName,\n      username: signupValues.username,\n      password: signupValues.password,\n      email: signupValues.email\n    };\n    axios.post('https://seanmx96-airbnb-optimal-price.herokuapp.com/createnewuser', newUser).then(res => {\n      console.log(res);\n      history.push('http://localhost:3000/login');\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const onLogin = e => {\n    e.preventDefault();\n    axios.post('https://seanmx96-airbnb-optimal-price.herokuapp.com/login', `grant_type=password&username=${loginValues.username}&password=${loginValues.password}`, {\n      headers: {\n        Authorization: `Basic ${btoa('lambda-client:lambda-secret')}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    }).then(res => {\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('user id', res.data.userId);\n      const token = localStorage.getItem('token');\n      const userId = localStorage.getItem('user id');\n      history.push('/userprofile');\n      console.log(token);\n      console.log(userId);\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const onAddListing = e => {\n    e.preventDefault();\n    const newListing = {\n      listingname: listingValues.listingname,\n      location: listingValues.location,\n      maxnumguests: listingValues.maxnumguests,\n      minnumnights: listingValues.minnumnights,\n      numbeds: listingValues.numbeds,\n      petsallowed: listingValues.petsallowed\n    };\n    axios.post('https://seanmx96-airbnb-optimal-price.herokuapp.com//listings/listing/', newListing).then(res => {\n      console.log(res);\n      history.push('http://localhost:3000/userprofile');\n    }).catch(err => {\n      debugger;\n    });\n  };\n\n  useEffect(() => {\n    formSchema.isValid(signupValues).then(valid => {\n      setDisabled(!valid);\n    });\n  }, [signupValues]);\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"App-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, \"AirBnb Price Finder\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-links\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"link\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, \"Home\"), /*#__PURE__*/React.createElement(Link, {\n    className: \"link\",\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    className: \"link\",\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, \"Sign Up\"))), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/userprofile\",\n    component: UserProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/createlisting\",\n    component: CreateListing,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: \"/listingcard/:id\",\n    component: ListingCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/createlisting\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CreateListing, {\n    onChange: onInputChange,\n    values: listingValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/userprofile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UserProfile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Login, {\n    onSubmit: onLogin,\n    onChange: onInputChange,\n    values: loginValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Signup, {\n    onSubmit: onSignup,\n    onChange: onInputChange,\n    values: signupValues,\n    errors: formErrors,\n    disabled: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Sigi/Desktop/Airbnb/front-end/my-project/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","useHistory","axios","axiosWithAuth","Yup","formSchema","Login","Signup","CreateListing","UserProfile","ListingCard","PrivateRoute","initialLoginValues","username","password","initialSignupValues","firstName","lastName","email","initialErrors","initialListingValues","listingId","listingname","location","maxnumguests","minnumnights","numbeds","petsallowed","initialDisabled","initialUsers","initialListings","App","loginValues","setLoginValues","signupValues","setSignupValues","history","formErrors","setFormErrors","disabled","setDisabled","users","setUsers","listingValues","setListingValues","listings","setListings","getUsers","get","then","res","data","catch","err","onInputChange","evt","name","value","target","reach","validate","errors","console","log","postNewUser","newUser","post","onSignup","push","onLogin","e","preventDefault","headers","Authorization","btoa","localStorage","setItem","token","userId","getItem","onAddListing","newListing","isValid","valid"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAO,WAAP;AAEA,SAAQC,aAAa,IAAIC,MAAzB,EAAiCC,MAAjC,EAAyCC,KAAzC,EAAgDC,IAAhD,EAAsDC,UAAtD,QAAuE,kBAAvE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AAGA,MAAMC,kBAAkB,GAAG;AACzBC,EAAAA,QAAQ,EAAC,EADgB;AAEzBC,EAAAA,QAAQ,EAAC;AAFgB,CAA3B;AAKA,MAAMC,mBAAmB,GAAG;AAC1BC,EAAAA,SAAS,EAAC,EADgB;AAE1BC,EAAAA,QAAQ,EAAC,EAFiB;AAG1BJ,EAAAA,QAAQ,EAAC,EAHiB;AAI1BC,EAAAA,QAAQ,EAAC,EAJiB;AAK1BI,EAAAA,KAAK,EAAC;AALoB,CAA5B;AAQA,MAAMC,aAAa,GAAE;AACnBH,EAAAA,SAAS,EAAE,EADQ;AAEnBC,EAAAA,QAAQ,EAAE,EAFS;AAGnBJ,EAAAA,QAAQ,EAAE,EAHS;AAInBK,EAAAA,KAAK,EAAE,EAJY;AAKnBJ,EAAAA,QAAQ,EAAE;AALS,CAArB;AAQA,MAAMM,oBAAoB,GAAE;AAC1BC,EAAAA,SAAS,EAAC,EADgB;AAE1BC,EAAAA,WAAW,EAAC,EAFc;AAG1BC,EAAAA,QAAQ,EAAC,EAHiB;AAI1BC,EAAAA,YAAY,EAAC,EAJa;AAK1BC,EAAAA,YAAY,EAAC,EALa;AAM1BC,EAAAA,OAAO,EAAC,EANkB;AAO1BC,EAAAA,WAAW,EAAC;AAPc,CAA5B;AAUA,MAAMC,eAAe,GAAE,KAAvB;AACA,MAAMC,YAAY,GAAG,EAArB;AACA,MAAMC,eAAe,GAAG,EAAxB;;AAGC,SAASC,GAAT,GAAe;AAEd,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCvC,QAAQ,CAACkB,kBAAD,CAA9C;AACA,QAAM,CAACsB,YAAD,EAAeC,eAAf,IAAkCzC,QAAQ,CAACqB,mBAAD,CAAhD;AACA,QAAMqB,OAAO,GAAGnC,UAAU,EAA1B;AACA,QAAM,CAACoC,UAAD,EAAaC,aAAb,IAA8B5C,QAAQ,CAACyB,aAAD,CAA5C;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0B9C,QAAQ,CAACkC,eAAD,CAAxC;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBhD,QAAQ,CAACmC,YAAD,CAAlC;AACA,QAAM,CAACc,aAAD,EAAgBC,gBAAhB,IAAoClD,QAAQ,CAAC0B,oBAAD,CAAlD;AACA,QAAM,CAACyB,QAAD,EAAWC,WAAX,IAA0BpD,QAAQ,CAACoC,eAAD,CAAxC;;AAEA,QAAMiB,QAAQ,GAAG,MAAM;AACrB5C,IAAAA,aAAa,GACZ6C,GADD,CACK,iEADL,EAECC,IAFD,CAEMC,GAAG,IAAI;AACXR,MAAAA,QAAQ,CAACQ,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAR;AACD,KAJD,EAKCC,KALD,CAKOC,GAAG,IAAI;AACZ;AACD,KAPD;AAQD,GATD;;AAWA,QAAMC,aAAa,GAAGC,GAAG,IAAI;AAC3B,UAAM;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAgBF,GAAG,CAACG,MAA1B;AAEAtD,IAAAA,GAAG,CACFuD,KADD,CACOtD,UADP,EACmBmD,IADnB,EAECI,QAFD,CAEUH,KAFV,EAGCR,IAHD,CAGM,MAAM;AACVX,MAAAA,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZ,SAACmB,IAAD,GAAO;AAFK,OAAD,CAAb;AAID,KARD,EASCJ,KATD,CASOC,GAAG,IAAI;AACZf,MAAAA,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZ,SAACmB,IAAD,GAAQH,GAAG,CAACQ,MAAJ,CAAW,CAAX;AAFI,OAAD,CAAb;AAID,KAdD;AAgBA5B,IAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,OAACwB,IAAD,GAAQC;AAFK,KAAD,CAAd;AAKAtB,IAAAA,eAAe,CAAC,EACd,GAAGD,YADW;AAEd,OAACsB,IAAD,GAAQC;AAFM,KAAD,CAAf;AAKAb,IAAAA,gBAAgB,CAAC,EACf,GAAGD,aADY;AAEf,OAACa,IAAD,GAAQC;AAFO,KAAD,CAAhB;AAKAK,IAAAA,OAAO,CAACC,GAAR,CAAY7B,YAAZ;AACD,GAnCD;;AAqCA,QAAM8B,WAAW,GAAGC,OAAO,IAAI;AAC7B/D,IAAAA,KAAK,CAACgE,IAAN,CAAW,mEAAX,EAAgFD,OAAhF,EACChB,IADD,CACMC,GAAG,IAAI;AACXR,MAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,EAAWS,GAAG,CAACC,IAAf,CAAD,CAAR;AACD,KAHD,EAICC,KAJD,CAIOC,GAAG,IAAI;AACZ;AACD,KAND;AAOD,GARD;;AAUA,QAAMc,QAAQ,GAAGZ,GAAG,IAAI;AACtB;AAEA,UAAMU,OAAO,GAAG;AACdjD,MAAAA,SAAS,EAAEkB,YAAY,CAAClB,SADV;AAEdC,MAAAA,QAAQ,EAAEiB,YAAY,CAACjB,QAFT;AAGdJ,MAAAA,QAAQ,EAAEqB,YAAY,CAACrB,QAHT;AAIdC,MAAAA,QAAQ,EAAEoB,YAAY,CAACpB,QAJT;AAKdI,MAAAA,KAAK,EAAEgB,YAAY,CAAChB;AALN,KAAhB;AAQIhB,IAAAA,KAAK,CACAgE,IADL,CACU,mEADV,EAC+ED,OAD/E,EAEKhB,IAFL,CAEUC,GAAG,IAAE;AACPY,MAAAA,OAAO,CAACC,GAAR,CAAYb,GAAZ;AACAd,MAAAA,OAAO,CAACgC,IAAR,CAAa,6BAAb;AACH,KALL,EAMKhB,KANL,CAMWC,GAAG,IAAE;AACRS,MAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACH,KARL;AASL,GApBD;;AAuBA,QAAMgB,OAAO,GAAGC,CAAC,IAAI;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACArE,IAAAA,KAAK,CACAgE,IADL,CACU,2DADV,EACwE,gCAA+BlC,WAAW,CAACnB,QAAS,aAAYmB,WAAW,CAAClB,QAAS,EAD7J,EACgK;AAC1J0D,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,SAAQC,IAAI,CAAC,6BAAD,CAAgC,EADrD;AAEP,wBAAgB;AAFT;AADiJ,KADhK,EAQKzB,IARL,CAQUC,GAAG,IAAE;AACPyB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8B1B,GAAG,CAACC,IAAJ,CAAS0B,KAAvC;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgC1B,GAAG,CAACC,IAAJ,CAAS2B,MAAzC;AACA,YAAMD,KAAK,GAAGF,YAAY,CAACI,OAAb,CAAqB,OAArB,CAAd;AACA,YAAMD,MAAM,GAAGH,YAAY,CAACI,OAAb,CAAqB,SAArB,CAAf;AACA3C,MAAAA,OAAO,CAACgC,IAAR,CAAa,cAAb;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYe,MAAZ;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAYb,GAAZ;AACH,KAjBL,EAkBKE,KAlBL,CAkBWC,GAAG,IAAE;AACRS,MAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACH,KApBL;AAqBD,GAvBD;;AAyBA,QAAM2B,YAAY,GAAGV,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAMU,UAAU,GAAG;AACjB3D,MAAAA,WAAW,EAAEqB,aAAa,CAACrB,WADV;AAEjBC,MAAAA,QAAQ,EAAEoB,aAAa,CAACpB,QAFP;AAGjBC,MAAAA,YAAY,EAAEmB,aAAa,CAACnB,YAHX;AAIjBC,MAAAA,YAAY,EAAEkB,aAAa,CAAClB,YAJX;AAKjBC,MAAAA,OAAO,EAAEiB,aAAa,CAACjB,OALN;AAMjBC,MAAAA,WAAW,EAAEgB,aAAa,CAAChB;AANV,KAAnB;AASAzB,IAAAA,KAAK,CACFgE,IADH,CACQ,wEADR,EACkFe,UADlF,EAEGhC,IAFH,CAEQC,GAAG,IAAI;AACTY,MAAAA,OAAO,CAACC,GAAR,CAAYb,GAAZ;AACAd,MAAAA,OAAO,CAACgC,IAAR,CAAa,mCAAb;AACH,KALH,EAMGhB,KANH,CAMSC,GAAG,IAAG;AACX;AACD,KARH;AASD,GArBD;;AAuBA1D,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,UAAU,CAAC6E,OAAX,CAAmBhD,YAAnB,EAAiCe,IAAjC,CAAsCkC,KAAK,IAAI;AAC7C3C,MAAAA,WAAW,CAAC,CAAC2C,KAAF,CAAX;AACD,KAFD;AAGD,GAJQ,EAIN,CAACjD,YAAD,CAJM,CAAT;AAMA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,EAAE,EAAC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,EAAE,EAAC,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFF,eAGE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,EAAE,EAAC,SAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,CAFF,CADF,eAUE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEA,oBAAC,YAAD;AAAc,IAAA,KAAK,MAAnB;AAAoB,IAAA,IAAI,EAAC,cAAzB;AAAwC,IAAA,SAAS,EAAEzB,WAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,eAGA,oBAAC,YAAD;AAAc,IAAA,KAAK,MAAnB;AAAoB,IAAA,IAAI,EAAC,gBAAzB;AAA0C,IAAA,SAAS,EAAED,aAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHA,eAIA,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAC,kBAAnB;AAAsC,IAAA,SAAS,EAAEE,WAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,eAME,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,gBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAe,IAAA,QAAQ,EAAE4C,aAAzB;AAAwC,IAAA,MAAM,EAAEX,aAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANF,eAUE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,cAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,eAcE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,QAAQ,EAAE0B,OAAjB;AAA0B,IAAA,QAAQ,EAAEf,aAApC;AAAmD,IAAA,MAAM,EAAEtB,WAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAdF,eAkBE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEmC,QAAlB;AAA4B,IAAA,QAAQ,EAAEb,aAAtC;AAAqD,IAAA,MAAM,EAAEpB,YAA7D;AAA2E,IAAA,MAAM,EAAEG,UAAnF;AAA+F,IAAA,QAAQ,EAAEE,QAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAlBF,CAVF,CADA,CADF;AAwCD;;AAED,eAAeR,GAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\n\nimport {BrowserRouter as Router, Switch, Route, Link, useHistory} from 'react-router-dom';\nimport axios from 'axios';\nimport axiosWithAuth from './utils/axiosWithAuth';\nimport * as Yup from 'yup';\nimport formSchema from './validation/formSchema';\n\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport CreateListing from './components/CreateListing';\nimport UserProfile from './components/UserProfile';\nimport ListingCard from './components/ListingCard';\nimport PrivateRoute from './components/PrivateRoute';\n\n\nconst initialLoginValues = {\n  username:'',\n  password:'',\n}\n\nconst initialSignupValues = {\n  firstName:'',\n  lastName:'',\n  username:'',\n  password:'',\n  email:'',\n}\n\nconst initialErrors= {\n  firstName: '',\n  lastName: '',\n  username: '',\n  email: '',\n  password: '',\n}\n\nconst initialListingValues= {\n  listingId:'',\n  listingname:'',\n  location:'',\n  maxnumguests:'',\n  minnumnights:'',\n  numbeds:'',\n  petsallowed:'',\n}\n\nconst initialDisabled= false\nconst initialUsers = []\nconst initialListings = []\n\n\n function App() {\n\n  const [loginValues, setLoginValues] = useState(initialLoginValues)\n  const [signupValues, setSignupValues] = useState(initialSignupValues)\n  const history = useHistory();\n  const [formErrors, setFormErrors] = useState(initialErrors)\n  const [disabled, setDisabled] = useState(initialDisabled)\n  const [users, setUsers] = useState(initialUsers)\n  const [listingValues, setListingValues] = useState(initialListingValues)\n  const [listings, setListings] = useState(initialListings)\n\n  const getUsers = () => {\n    axiosWithAuth()\n    .get('https://seanmx96-airbnb-optimal-price.herokuapp.com/users/users')\n    .then(res => {\n      setUsers(res.data.data)\n    })\n    .catch(err => {\n      debugger\n    })\n  }\n\n  const onInputChange = evt => {\n    const {name, value} = evt.target\n\n    Yup\n    .reach(formSchema, name)\n    .validate(value)\n    .then(() => {\n      setFormErrors({\n        ...formErrors,\n        [name]:''\n      })\n    })\n    .catch(err => {\n      setFormErrors({\n        ...formErrors,\n        [name]: err.errors[0]\n      })\n    })\n\n    setLoginValues({\n      ...loginValues,\n      [name]: value\n    })\n\n    setSignupValues({\n      ...signupValues,\n      [name]: value\n    })\n\n    setListingValues({\n      ...listingValues,\n      [name]: value\n    })\n\n    console.log(signupValues)\n  }\n\n  const postNewUser = newUser => {\n    axios.post('https://seanmx96-airbnb-optimal-price.herokuapp.com/createnewuser', newUser)\n    .then(res => {\n      setUsers([...users, res.data])\n    })\n    .catch(err => {\n      debugger\n    })\n  }\n\n  const onSignup = evt => {\n    // evt.preventDefault()\n\n    const newUser = {\n      firstName: signupValues.firstName,\n      lastName: signupValues.lastName,\n      username: signupValues.username,\n      password: signupValues.password,\n      email: signupValues.email\n    }\n\n        axios\n            .post('https://seanmx96-airbnb-optimal-price.herokuapp.com/createnewuser', newUser)\n            .then(res=>{\n                console.log(res)\n                history.push('http://localhost:3000/login')\n            })\n            .catch(err=>{\n                console.log(err)\n            })\n  }\n  \n\n  const onLogin = e => {\n    e.preventDefault()\n    axios\n        .post('https://seanmx96-airbnb-optimal-price.herokuapp.com/login', `grant_type=password&username=${loginValues.username}&password=${loginValues.password}`, {\n          headers: {\n            Authorization: `Basic ${btoa('lambda-client:lambda-secret')}`,\n            'Content-Type': 'application/x-www-form-urlencoded'\n\n          }\n        })\n        .then(res=>{\n            localStorage.setItem('token', res.data.token)\n            localStorage.setItem('user id', res.data.userId)\n            const token = localStorage.getItem('token')\n            const userId = localStorage.getItem('user id')\n            history.push('/userprofile')\n            console.log(token)\n            console.log(userId)\n            console.log(res)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n  }\n\n  const onAddListing = e => {\n    e.preventDefault()\n    \n    const newListing = {\n      listingname: listingValues.listingname,\n      location: listingValues.location,\n      maxnumguests: listingValues.maxnumguests,\n      minnumnights: listingValues.minnumnights,\n      numbeds: listingValues.numbeds,\n      petsallowed: listingValues.petsallowed\n    }\n\n    axios\n      .post('https://seanmx96-airbnb-optimal-price.herokuapp.com//listings/listing/', newListing)\n      .then(res => {\n          console.log(res)\n          history.push('http://localhost:3000/userprofile')\n      })\n      .catch(err =>{\n        debugger\n      })\n  }\n\n  useEffect(() => {\n    formSchema.isValid(signupValues).then(valid => {\n      setDisabled(!valid);\n    });\n  }, [signupValues])\n\n  return (\n    <Router>\n    <div className=\"App\">\n      <nav className=\"App-header\">\n        <h1>AirBnb Price Finder</h1>\n        <div className='nav-links'>\n          <Link className='link' to='/'>Home</Link>\n          <Link className='link' to='/login'>Login</Link>\n          <Link className='link' to='/signup'>Sign Up</Link>\n        </div>\n      </nav>\n\n      <Switch>\n\n      <PrivateRoute exact path='/userprofile' component={UserProfile}/>\n      <PrivateRoute exact path='/createlisting' component={CreateListing}/>\n      <PrivateRoute path='/listingcard/:id' component={ListingCard}/>\n\n        <Route path='/createlisting'>\n          <CreateListing onChange={onInputChange} values={listingValues}/>\n        </Route>\n\n        <Route path='/userprofile'>\n          <UserProfile />\n        </Route>\n\n        <Route path='/login'>\n          <Login onSubmit={onLogin} onChange={onInputChange} values={loginValues}/>\n        </Route>\n\n        <Route path='/signup'>\n          <Signup onSubmit={onSignup} onChange={onInputChange} values={signupValues} errors={formErrors} disabled={disabled}/>\n          {/* <CreateListing onChange={onAddListing} values={listingValues}/> */}\n        </Route>\n\n      </Switch>\n\n    </div>\n    </Router>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}